!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports["bullet-train-rules-engine"]=n():e["bullet-train-rules-engine"]=n()}(window,function(){return function(e){var n={};function r(t){if(n[t])return n[t].exports;var u=n[t]={i:t,l:!1,exports:{}};return e[t].call(u.exports,u,u.exports,r),u.l=!0,u.exports}return r.m=e,r.c=n,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var u in e)r.d(t,u,function(n){return e[n]}.bind(null,u));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="",r(r.s=1)}([function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(n,r,t){r=Array.isArray(r)?r:r.split(".");n=n[r[0]];if(n&&r.length>1)return e(n,r.slice(1));return void 0===n?t:n}},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,n){return y(e,{all:{rules:n}},["all"]).then(function(e){return{result:e.all.result,rules:e.all.rules}})};var t=function(e){return e&&e.__esModule?e:{default:e}}(r(0));var u=function(e){0},o="EQUAL",l="NOT_EQUAL",a="GREATER_THAN",c="GREATER_THAN_INCLUSIVE",i="LESS_THAN",f="LESS_THAN_INCLUSIVE",s="CONTAINS",d="NOT_CONTAINS",p="REGEX",y=function e(n,r,y){return u(0),new Promise(function(v,b){var _=y[y.length-1],E=(0,t.default)(r,y);if("all"===_||"any"===_||"none"===_)return Promise.all(E.rules.map(function(t,u){var o=["rules",u];return t.any?o=o.concat(["any"]):t.all?o=o.concat(["all"]):t.none&&(o=o.concat(["none"])),e(n,r,y.concat(o))})).then(function(e){var n=void 0;return"all"===_?n=!e.includes(!1):"any"===_?n=e.includes(!0):"none"===_&&(n=!e.includes(!0)),E.result=!!n,1===y.length&&v(r),v(n)});var O=!!function(e,n){var r=n.property,y=n.operator,v=n.value;u();var b=(0,t.default)(e,r);switch(y){case o:return b===v;case l:return b!==v;case a:return b>v;case c:return b>=v;case i:return b<v;case f:return b<=v;case s:return b&&(b+"").includes(v);case d:return!b||!(b+"").includes(v);case p:return b&&new RegExp(v).test(b);default:return console.error("Invalid operator"),!1}}(n,E);return E.result=O,v(O)})}}])});
//# sourceMappingURL=bullet-train-rules-engine.js.map