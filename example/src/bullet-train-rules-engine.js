!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports["bullet-train-rules-engine"]=r():e["bullet-train-rules-engine"]=r()}(window,function(){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var u=r[n]={i:n,l:!1,exports:{}};return e[n].call(u.exports,u,u.exports,t),u.l=!0,u.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var u in e)t.d(n,u,function(r){return e[r]}.bind(null,u));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=1)}([function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function e(r,t,n){t=Array.isArray(t)?t:t.split(".");r=r[t[0]];if(r&&t.length>1)return e(r,t.slice(1));return void 0===r?n:r}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,r){return o(e,{all:{rules:r}},["all"]).then(function(e){return{result:e.all.result,rules:e.all.rules}})};var n=function(e){return e&&e.__esModule?e:{default:e}}(t(0));var u=function(e){console.log(e)},o=function e(r,t,o){return u("Processing"),new Promise(function(l,a){var i=o[o.length-1],c=(0,n.default)(t,o);if("all"===i||"any"===i)return Promise.all(c.rules.map(function(n,u){var l=["rules",u];return n.any?l=l.concat(["any"]):n.all&&(l=l.concat(["all"])),e(r,t,o.concat(l))})).then(function(e){var r=void 0;return r="all"===i?!e.includes(!1):e.includes(!0),c.result=!!r,1===o.length&&l(t),l(r)});var s=!!function(e,r){var t=r.property,o=r.operator,l=r.value;u("Testing value");var a=(0,n.default)(e,t);switch(o){case"EQUAL":return a===l;case"NOT_EQUAL":return a!==l;case"GREATER_THAN":return a>l;case"GREATER_THAN_INCLUSIVE":return a>=l;case"LESS_THAN":return a<l;case"LESS_THAN_INCLUSIVE":return a<=l;case"CONTAINS":return a&&(a+"").includes(l);case"NOT_CONTAINS":return!a||!(a+"").includes(l);case"REGEX":return a&&new RegExp(l).test(a);default:return console.error("Invalid operator"),!1}}(r,c);return c.result=s,l(s)})}}])});
//# sourceMappingURL=bullet-train-rules-engine.js.map